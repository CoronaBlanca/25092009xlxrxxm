-- Blacklist de jugadores por UserId
local blacklist = {
    [0000000000] = true, -- jugador 1
    [0000000001] = true, -- jugador 2
}

-- Revisar si el jugador está en la blacklist
local playerId = game.Players.LocalPlayer.UserId
if blacklist[playerId] then
    -- Kickear al jugador directamente
    game.Players.LocalPlayer:Kick("Oh no you are on the blacklist")
end

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local displayName = player.DisplayName
if not displayName or displayName == "" then
    displayName = player.Name
end

local title = ("Galaxy XVI | Welcome %s"):format(displayName)

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/CoronaBlanca/25092009UI/refs/heads/main/Xlxrxxm%20bx%20shxryx"))()

local window = library:AddWindow(title, {
    main_color = Color3.fromRGB(75, 0, 130),
    min_size = Vector2.new(400, 500),
    can_resize = true,
})

local mainTab = window:AddTab("Main")

mainTab:AddLabel("Auto Tools").TextSize = 24

-- Auto Punch Toggle
mainTab:AddSwitch("Auto Punch", function(Value)
    _G.AutoPunch = Value
    
    if Value then
        local punchTool = game.Players.LocalPlayer.Backpack:FindFirstChild("Punch")
        if punchTool then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(punchTool)
        end
    else
        local character = game.Players.LocalPlayer.Character
        local equipped = character:FindFirstChild("Punch")
        if equipped then
            equipped.Parent = game.Players.LocalPlayer.Backpack
        end
    end
    
    task.spawn(function()
        while _G.AutoPunch do
            if not _G.AutoPunch then break end
            local character = game.Players.LocalPlayer.Character
            local punchTool = character and character:FindFirstChild("Punch")
            
            if punchTool then
                punchTool:Activate()
            else
                local backpack = game.Players.LocalPlayer.Backpack
                local newPunch = backpack:FindFirstChild("Punch")
                if newPunch then
                    game.Players.LocalPlayer.Character.Humanoid:EquipTool(newPunch)
                end
            end
            task.wait(0.1)
        end
    end)
end, "Golpea automáticamente con Punch")

-- Auto Demon Sword Toggle
mainTab:AddSwitch("Auto Demon Sword", function(Value)
    _G.AutoDemonSword = Value
    
    if Value then
        local demonSword = game.Players.LocalPlayer.Backpack:FindFirstChild("Demon Sword")
        if demonSword then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(demonSword)
        end
    else
        local character = game.Players.LocalPlayer.Character
        local equipped = character:FindFirstChild("Demon Sword")
        if equipped then
            equipped.Parent = game.Players.LocalPlayer.Backpack
        end
    end
    
    task.spawn(function()
        while _G.AutoDemonSword do
            if not _G.AutoDemonSword then break end
            local character = game.Players.LocalPlayer.Character
            local demonSword = character and character:FindFirstChild("Demon Sword")
            
            if demonSword then
                demonSword:Activate()
            else
                local backpack = game.Players.LocalPlayer.Backpack
                local newSword = backpack:FindFirstChild("Demon Sword")
                if newSword then
                    game.Players.LocalPlayer.Character.Humanoid:EquipTool(newSword)
                end
            end
            task.wait(0.1)
        end
    end)
end, "Golpea automáticamente con Demon Sword")

-- Auto Punch + Demon Sword Toggle
mainTab:AddSwitch("Auto Punch + Sword Demon", function(Value)
    _G.AutoPunchSword = Value
    
    if Value then
        local backpack = game.Players.LocalPlayer.Backpack
        local tool = backpack:FindFirstChild("Punch") or backpack:FindFirstChild("Demon Sword")
        if tool then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
        end
    else
        local character = game.Players.LocalPlayer.Character
        local equipped = character:FindFirstChild("Punch") or character:FindFirstChild("Demon Sword")
        if equipped then
            equipped.Parent = game.Players.LocalPlayer.Backpack
        end
    end
    
    task.spawn(function()
        while _G.AutoPunchSword do
            if not _G.AutoPunchSword then break end
            local character = game.Players.LocalPlayer.Character
            local tool = character and (character:FindFirstChild("Punch") or character:FindFirstChild("Demon Sword"))
            
            if tool then
                tool:Activate()
            else
                local backpack = game.Players.LocalPlayer.Backpack
                local newTool = backpack:FindFirstChild("Punch") or backpack:FindFirstChild("Demon Sword")
                if newTool then
                    game.Players.LocalPlayer.Character.Humanoid:EquipTool(newTool)
                end
            end
            task.wait(0.1)
        end
    end)
end, "Golpea automáticamente con Punch o Demon Sword")

mainTab:AddSwitch("Fast Tools", function(Value)
    _G.FastTools = Value

    local player = game.Players.LocalPlayer
    local backpack = player:WaitForChild("Backpack")

    -- Lista de herramientas y sus propiedades de velocidad
    local fastTools = {
        { "Punch", "attackTime", Value and 0 or 0.35 },
        { "Demon Sword", "attackTime", Value and 0 or 0.35 },
        { "Weight", "repTime", Value and 0 or 1 },
    }

    -- Aplicar velocidad a las herramientas en mochila
    for _, toolInfo in ipairs(fastTools) do
        local toolName, property, speed = unpack(toolInfo)

        local tool = backpack:FindFirstChild(toolName)
        if tool and tool:FindFirstChild(property) then
            tool[property].Value = speed
        end

        -- También aplicar a las herramientas equipadas
        local equipped = player.Character and player.Character:FindFirstChild(toolName)
        if equipped and equipped:FindFirstChild(property) then
            equipped[property].Value = speed
        end
    end
end, "Acelera Punch, Demon Sword y Weight")

mainTab:AddLabel("")
mainTab:AddLabel("Auto Orbes OP").TextSize = 24

mainTab:AddSwitch("Auto Orb", function(state)
    autoOrb = state

    -- Solo crea el mensaje visual una vez
    if not orbGuiCreado then
        local screenGui = Instance.new("ScreenGui")
        screenGui.Name = "Sherya"
        screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

        orbGuiCreado = true
    end

    -- Auto Orb loop
    task.spawn(function()
        while autoOrb do
            for _, v in pairs(workspace:GetChildren()) do
                if v.Name == "Drop" and v:IsA("BasePart") then
                    v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                end
            end
            task.wait(1)
        end
    end)
end)

mainTab:AddLabel("")
mainTab:AddLabel("OP Things/Farms").TextSize = 24

local switch = mainTab:AddSwitch("Lock Position", function(Value)
    if Value then
        
        local currentPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        
        if getgenv().posLock then
            getgenv().posLock:Disconnect()
            getgenv().posLock = nil
        end
    end
end)

-- 🌟 Anti-Lag Script (sin GUI)
local antiLagActive = false

-- 🧠 Función para optimizar el juego
local function optimizeGame()
    local Lighting = game:GetService("Lighting")
    local Terrain = workspace:FindFirstChildOfClass("Terrain")

    -- 🔧 Configuración de iluminación
    Lighting.GlobalShadows = false
    Lighting.FogEnd = 999999
    Lighting.Brightness = 1
    Lighting.EnvironmentDiffuseScale = 0
    Lighting.EnvironmentSpecularScale = 0
    Lighting.Technology = Enum.Technology.Compatibility

    --  Optimización del terreno (si existe)
    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
    end

    --  Optimización del workspace
    workspace.StreamingEnabled = true
    workspace.StreamingTargetRadius = 100
    workspace.InterpolationThrottling = Enum.InterpolationThrottlingMode.Enabled

    --  Configurar calidad de renderizado
    settings().Rendering.QualityLevel = "Level01"

    --  Desactivar decoraciones innecesarias
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") then
            obj.Enabled = false
        elseif obj:IsA("BasePart") and obj.Reflectance > 0 then
            obj.Reflectance = 0
        end
    end
end

--  Activador del Anti-Lag
local function activateAntiLag()
    if antiLagActive then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Sherya Script";
            Text = "⚙️ Anti-Lag ya está activo.";
            Duration = 4;
        })
        return
    end

    antiLagActive = true
    optimizeGame()

    --  Notificación
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Sherya Script";
        Text = "🚀 Anti-Lag activado con éxito!";
        Duration = 5;
    })

    print("Anti-Lag activado correctamente")
end

--  Botón para activarlo (si tienes carpeta opThingsFolder)
mainTab:AddButton("Anti-Lag", function()
    activateAntiLag()
end)

--  Etiqueta informativa
mainTab:AddLabel("Reduce lag y mejora el rendimiento")

-- Variables para el Anti AFK GUI
local antiAFKActive = false
local antiAFKConnection = nil
local sessionStartTime = tick()
local sheryaGUI = nil

--  Función para crear la GUI de monitoreo (estilo minimalista)
local function createSheryaGUI()
    if sheryaGUI then
        sheryaGUI:Destroy()
        sheryaGUI = nil
    end
    
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local Stats = game:GetService("Stats")
    local player = Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    
    -- ScreenGui
    sheryaGUI = Instance.new("ScreenGui")
    sheryaGUI.Name = "SheryaScript"
    sheryaGUI.Parent = playerGui
    sheryaGUI.ResetOnSpawn = false
    sheryaGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Frame principal (recto, con borde)
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = sheryaGUI
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30) -- Gris oscuro
    mainFrame.BorderSizePixel = 2
    mainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0) -- Borde negro
    mainFrame.Position = UDim2.new(0, 15, 0, 15)
    mainFrame.Size = UDim2.new(0, 200, 0, 100)
    mainFrame.Active = true
    mainFrame.Draggable = true

    --  Título
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Parent = mainFrame
    titleLabel.BackgroundTransparency = 1
    titleLabel.Size = UDim2.new(1, 0, 0, 22)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Text = "Galaxy XVI"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextScaled = true
    titleLabel.TextWrapped = true

    -- Ping Label
    local pingLabel = Instance.new("TextLabel")
    pingLabel.Name = "Ping"
    pingLabel.Parent = mainFrame
    pingLabel.BackgroundTransparency = 1
    pingLabel.Position = UDim2.new(0, 5, 0, 25)
    pingLabel.Size = UDim2.new(1, -10, 0, 18)
    pingLabel.Font = Enum.Font.Gotham
    pingLabel.Text = "Ping: 0 ms"
    pingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    pingLabel.TextScaled = true
    pingLabel.TextXAlignment = Enum.TextXAlignment.Left

    -- FPS Label
    local fpsLabel = Instance.new("TextLabel")
    fpsLabel.Name = "FPS"
    fpsLabel.Parent = mainFrame
    fpsLabel.BackgroundTransparency = 1
    fpsLabel.Position = UDim2.new(0, 5, 0, 45)
    fpsLabel.Size = UDim2.new(1, -10, 0, 18)
    fpsLabel.Font = Enum.Font.Gotham
    fpsLabel.Text = "FPS: 0"
    fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    fpsLabel.TextScaled = true
    fpsLabel.TextXAlignment = Enum.TextXAlignment.Left

    -- Session Time Label
    local sessionLabel = Instance.new("TextLabel")
    sessionLabel.Name = "SessionTime"
    sessionLabel.Parent = mainFrame
    sessionLabel.BackgroundTransparency = 1
    sessionLabel.Position = UDim2.new(0, 5, 0, 65)
    sessionLabel.Size = UDim2.new(1, -10, 0, 18)
    sessionLabel.Font = Enum.Font.Gotham
    sessionLabel.Text = "Session: 00:00:00"
    sessionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sessionLabel.TextScaled = true
    sessionLabel.TextXAlignment = Enum.TextXAlignment.Left

    -- Status Label
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Name = "Status"
    statusLabel.Parent = mainFrame
    statusLabel.BackgroundTransparency = 1
    statusLabel.Position = UDim2.new(0, 5, 0, 83)
    statusLabel.Size = UDim2.new(1, -10, 0, 18)
    statusLabel.Font = Enum.Font.GothamBold
    statusLabel.Text = "Anti-AFK Activo"
    statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    statusLabel.TextScaled = true
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left

    -- FPS y Ping actualizador
    local frameCount, lastTime, currentFPS = 0, tick(), 0
    local function formatTime(seconds)
        local h = math.floor(seconds / 3600)
        local m = math.floor((seconds % 3600) / 60)
        local s = math.floor(seconds % 60)
        return string.format("%02d:%02d:%02d", h, m, s)
    end

    local function updateStats()
        frameCount += 1
        local now = tick()
        if now - lastTime >= 1 then
            currentFPS = frameCount
            frameCount, lastTime = 0, now
        end
        local ping = math.round(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())
        local sessionTime = tick() - sessionStartTime
        pingLabel.Text = "Ping: " .. ping .. " ms"
        fpsLabel.Text = "FPS: " .. currentFPS
        sessionLabel.Text = "Session: " .. formatTime(sessionTime)
    end
    RunService.Heartbeat:Connect(updateStats)

    return sheryaGUI
end

--  Función para activar Anti-AFK
local function startAntiAFK()
    if antiAFKConnection then
        antiAFKConnection:Disconnect()
    end
    
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Movimiento micro para evitar AFK
    antiAFKConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if humanoid and humanoid.Parent then
            local t = tick()
            local movement = math.sin(t * 0.1) * 0.01
            humanoid:Move(Vector3.new(movement, 0, 0), false)
        end
    end)
    
    -- Optimizaciones básicas
    local function optimizeGame()
        local lighting = game:GetService("Lighting")
        lighting.GlobalShadows = false
        lighting.Technology = Enum.Technology.Compatibility
        workspace.StreamingEnabled = true
        workspace.StreamingTargetRadius = 100
        settings().Rendering.QualityLevel = "Level01"
    end
    optimizeGame()
end

--  Función para detener Anti-AFK
local function stopAntiAFK()
    if antiAFKConnection then
        antiAFKConnection:Disconnect()
        antiAFKConnection = nil
    end
    if sheryaGUI then
        sheryaGUI:Destroy()
        sheryaGUI = nil
    end
end

--  Botón para activar/desactivar
mainTab:AddButton("Anti AFK GUI", function()
    if not antiAFKActive then
        antiAFKActive = true
        sessionStartTime = tick()
        createSheryaGUI()
        startAntiAFK()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Sherya Script";
            Text = "Anti-AFK activado! GUI visible.";
            Duration = 5;
        })
        print("[✅] Anti-AFK activado con GUI")
    else
        antiAFKActive = false
        stopAntiAFK()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Sherya Script";
            Text = "Anti-AFK desactivado! GUI cerrada.";
            Duration = 5;
        })
        print("[🛑] Anti-AFK desactivado")
    end
end)

mainTab:AddLabel("Anti-AFK UI activate")


local miscTab = window:AddTab("Misc")

miscTab:AddLabel("Misc").TextSize  = 24

miscTab:AddLabel("-----{Speed}-----")

-- Variable global para la velocidad
local player = game.Players.LocalPlayer
local speedValue = 16
local autoSpeedEnabled = false
local autoSpeedConnection

-- TextBox para ajustar la velocidad manualmente
miscTab:AddTextBox("Auto Speed", function(text)
    speedValue = tonumber(text) or 16
end, "Ingresa la velocidad deseada")

-- Función que aplica la velocidad fija constantemente
local function applyConstantSpeed()
    while autoSpeedEnabled do
        pcall(function()
            if player and player.Character and player.Character:FindFirstChild("Humanoid") then
                local humanoid = player.Character.Humanoid
                if humanoid.WalkSpeed ~= speedValue then
                    humanoid.WalkSpeed = speedValue
                end
            end
        end)
        task.wait(0.1) -- Ajusta este valor si quieres que se actualice más rápido o más lento
    end
end

-- Switch principal
local autoSpeedSwitch = miscTab:AddSwitch("Auto Set Speed", function(bool)
    autoSpeedEnabled = bool

    if autoSpeedEnabled then
        -- Aplicar la velocidad actual
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = speedValue
        end

        -- Reaplicar velocidad al respawnear
        if autoSpeedConnection then
            autoSpeedConnection:Disconnect()
        end

        autoSpeedConnection = player.CharacterAdded:Connect(function(character)
            local humanoid = character:WaitForChild("Humanoid")
            humanoid.WalkSpeed = speedValue
        end)

        -- Mantener la velocidad fija en un loop
        task.spawn(applyConstantSpeed)
    else
        if autoSpeedConnection then
            autoSpeedConnection:Disconnect()
            autoSpeedConnection = nil
        end
    end
end)

miscTab:AddLabel("-----{Extras}-----")

local infiniteJumpSwitch = miscTab:AddSwitch("Infinite Jump", function(bool)
    if bool then
        local infiniteJumpConnection
        infiniteJumpConnection = game:GetService("UserInputService").JumpRequest:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)

        infiniteJumpSwitch._connection = infiniteJumpConnection
    else
        if infiniteJumpSwitch._connection then
            infiniteJumpSwitch._connection:Disconnect()
            infiniteJumpSwitch._connection = nil
        end
    end
end)

local noClipSwitch = miscTab:AddSwitch("No Clip", function(bool)
    if bool then
        local noclipLoop = game:GetService("RunService").Stepped:Connect(function()
            for _, child in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                if child:IsA("BasePart") and child.CanCollide == true then
                    child.CanCollide = false
                end
            end
        end)

        noClipSwitch._noclipLoop = noclipLoop
    else
        if noClipSwitch._noclipLoop then
            noClipSwitch._noclipLoop:Disconnect()
            noClipSwitch._noclipLoop = nil
        end

        for _, child in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
            if child:IsA("BasePart") then
                child.CanCollide = true
            end
        end
    end
end)

miscTab:AddLabel("-----{Time}-----")

local timeDropdown =
    miscTab:AddDropdown(
    "Change Time",
    function(selection)
        local lighting = game:GetService("Lighting")

        if selection == "Night" then
            lighting.ClockTime = 0
        elseif selection == "Day" then
            lighting.ClockTime = 12
        elseif selection == "Midnight" then
            lighting.ClockTime = 6
        end
    end
)

timeDropdown:Add("Night")
timeDropdown:Add("Day")
timeDropdown:Add("Midnight")

miscTab:AddLabel("-----{Server}-----")

miscTab:AddButton("Rejoin Server", function()
    local TeleportService = game:GetService("TeleportService")
    
    -- Obtener servidores disponibles y unirse a uno aleatorio
    local success, result = pcall(function()
        TeleportService:TeleportToPlaceInstance(game.PlaceId, nil, player)
    end)
    
    if not success then
        -- Si falla, intentar teleport normal a un nuevo servidor
        TeleportService:Teleport(game.PlaceId, player)
    end
    
    print("Cambiando a otro servidor...")
end)

miscTab:AddLabel("-----{External scripts}-----")

miscTab:AddButton("Infinite Yield", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

miscTab:AddButton("GhostX Hub", function()
    loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-GhostX-Hub-7158"))()
end)

local creditsTab = window:AddTab("Credits")

creditsTab:AddLabel("╭──────────────────────────╮")
creditsTab:AddLabel("         Galaxy Hub")
creditsTab:AddLabel("╰──────────────────────────╯")
creditsTab:AddLabel("")
creditsTab:AddLabel("Script Made By")
creditsTab:AddLabel("")
creditsTab:AddLabel("Sherya (Isabella)")
creditsTab:AddLabel("")
creditsTab:AddLabel("Instagram : sheryaluck")
creditsTab:AddLabel("Tik tok : sherya6000")
creditsTab:AddLabel("Discord : isabella_hrz")
creditsTab:AddLabel("Roblox : MissSherya")
creditsTab:AddLabel("")
creditsTab:AddLabel("Thanks for using the script")
creditsTab:AddLabel("Errors to MD")
creditsTab:AddLabel("")

creditsTab:AddButton("Servidor Discord", function()
    setclipboard("https://discord.gg/rnDrhTZZCF")
end)
